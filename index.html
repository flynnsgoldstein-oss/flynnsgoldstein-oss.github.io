<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>זמני היום - Gra</title>
<style>
  body {background:#000;color:#fff;font-family:Alef,sans-serif;text-align:center;padding:2em;direction:rtl;}
  h1{font-size:3em;margin:0.2em 0;}
  p.time{font-size:2.5em;margin:0.3em 0;padding:0.3em 0.8em;border:3px dotted #fff;border-radius:10px;}
</style>
</head>
<body>
  <h1>סוף זמן קריאת שמע</h1>
  <p id="shemaTime" class="time">--:--</p>
  <h1>סוף זמן תפילה</h1>
  <p id="tefillahTime" class="time">--:--</p>

  <script>
    async function fetchZmanim() {
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth()+1).padStart(2,'0');
      const dd = String(today.getDate()).padStart(2,'0');
      const url = `https://www.hebcal.com/zmanim?cfg=json&geonameid=5178225&date=${yyyy}-${mm}-${dd}`;

      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error('HTTP error ' + res.status);
        const data = await res.json();

        const shemaRaw = data.times.sofZmanShma;
        const tefillahRaw = data.times.sofZmanTfilla;

        document.getElementById('shemaTime').innerText = shemaRaw
          ? new Date(shemaRaw).toLocaleTimeString('he-IL',{hour:'2-digit',minute:'2-digit',hour12:false})
          : 'לא זמין';
        document.getElementById('tefillahTime').innerText = tefillahRaw
          ? new Date(tefillahRaw).toLocaleTimeString('he-IL',{hour:'2-digit',minute:'2-digit',hour12:false})
          : 'לא זמין';
      } catch(err) {
        document.getElementById('shemaTime').innerText = 'שגיאה';
        document.getElementById('tefillahTime').innerText = 'שגיאה';
        console.error(err);
      }
    }

    fetchZmanim();
    setInterval(fetchZmanim,60*60*1000); // refresh every hour
  </script>
</body>
</html>
